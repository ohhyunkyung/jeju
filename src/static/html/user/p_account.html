<section class="pop page " id="p_account">
	<div class="popBox">
		<div class="popCon">
			<div class="popHd">
				<h2>계정 <span class="popType">상세</span></h2>
				<a href="javascript:;" class="popClose"></a>
			</div>
			<div class="popBody">
				<div class="formWrap">
					<div class="formGroup">
						<div class="formHd">
							<h2>계정</h2>
							<p>계정 정보를 입력해 주세요.</p>
							<!-- 사용 여부 -->
							<button type="button" class="toggle" id="toggleAccount"><span class="toggleBar"></span></button>
							<!--비번 초기화로 잠겼을 때 cmt addClass('open') -->
							<p class="cmt err" id="accountLockTxt"><i></i><span>계정 사용 불가<br>[비밀번호 초기화] 해주세요.</span></p>
						</div>
						<div class="formBody">
							<ul class="form">
								<li class="ness"  id="accountNewId">
									<label>아이디</label>
									<div class="iptArea">
										<div class="ipt focus">
											<input type="text" onkeyup="accountVaild(this,'userId');" id="userId">
										</div>
										<p class="cmt err"><i></i><span>이미 사용중인 아이디입니다.</span></p>
									</div>
								</li>
								<li style="display:none;" id="accountDetailId">
									<label>아이디</label>
									<div class="ipt readonly">
										<input type="text" value="hong3">
									</div>
								</li>
								<li class="ness">
									<label>비밀번호</label>
									<div class="iptArea">
										<div class="ipt">
											<input type="password"  onkeyup="accountVaild(this,'userPw');" >
										</div>
									</div>
								</li>
								<li>
									<label>권한
										<button type="button" class="btn-icon" onclick="quePermission(this);">
											<i class="ico-question i16"></i>
										</button>
									</label>
									<div class="chkArea">
										<span class="chk">
											<input type="radio" id="permissionsType1" name="permissionsType" checked>
											<label for="permissionsType1">
												<span class="chkShape"></span>
												<span class="chkTxt">사용자</span>
											</label>
										</span>
										<span class="chk">
											<input type="radio" id="permissionsType2" name="permissionsType">
											<label for="permissionsType2">
												<span class="chkShape"></span>
												<span class="chkTxt">관리자</span>
											</label>
										</span>
										<span class="chk">
											<input type="radio" id="permissionsType3" name="permissionsType">
											<label for="permissionsType3">
												<span class="chkShape"></span>
												<span class="chkTxt">슈퍼 관리자</span>
											</label>
										</span>
									</div>
								</li>
							</ul>
						</div>
					</div>
					<!--//계정-->
					<div class="formGroup">
						<div class="formHd">
							<h2>조직</h2>
							<p>조직을 선택해 주세요.</p>
						</div>
						<div class="formBody">
							<ul class="form">
								<li>
									<label>부서</label>
									<div class="ipt" style="width:256px;">
										<select>
											<option>고객 경영팀</option>
											<option>고객 센터</option>
										</select>
									</div>
								</li>
								<li>
									<label>직급</label>
									<div class="ipt"  style="width:256px;">
										<select>
											<option>상담사</option>
											<option>센터장</option>
											<option>팀원</option>
											<option>팀장</option>
										</select>
									</div>
									<span class="chk m-t4" id="chkuserAccountAccess" style="display:none;">
										<input type="checkbox" id="userAccountAccess" name="userAccountAccess">
										<label for="userAccountAccess">
											<span class="chkShape"></span>
											<span class="chkTxt">‘온라인센터’의 ‘사용자’ 계정 관리 권한을 부여합니다.</span>
										</label>
									</span>
								</li>
							</ul>
						</div>
					</div>
					<!--//조직-->
					<div class="formGroup">
						<div class="formHd">
							<h2>사용자</h2>
							<p>사용자 정보를 입력해 주세요.</p>
						</div>
						<div class="formBody">
							<ul class="form">
								<li class="ness">
									<label>이름</label>
									<div class="ipt">
										<input type="text" onkeyup="accountVaild(this,'userName');">
									</div>
								</li>
								<li class="ness">
									<label>연락처</label>
									<div class="ipt">
										<input type="text" onkeyup="accountVaild(this,'userPhone');" oninput="phone(this);">
									</div>
								</li>
							</ul>
						</div>
					</div>
					<!--//사용자-->
				</div>
				<!--//formWrap-->
			</div>
			<!--//popBody-->
			<div class="popFooter">
				<div>
					<button type="button" class="btn-lightOrange" onclick="resetPw(this);" id="resetPw"><i class="ico-lock"></i>비밀번호 초기화</button>
				</div>
				<div class="btnArea">
					<button type="button" class="btn-l" onclick="deleteAccount(this);" id="deleteAccount">삭제</button>
					<button type="button" class="btn-b savePop" onclick="saveAccount(this);" id="saveAccount" disabled><i class="ico-chk"></i>저장</button>
				</div>
			</div>
			<!--//popFooter-->
		</div>
	</div>
</section>
<!--//계정 상세-->

<script>
	/*----------추가*/
	function add(){
				$('#p_account').addClass('open');

				$('#resetPw').hide();
				$('#deleteAccount').hide();
				$('#accountDetailId').hide();
				$('#accountNewId').show();
				$('#saveAccount').prop('disabled', true);
				$('#userId').focus();
				$('.popType').text('등록')
				$('#toggleAccount').hide();
			}

			/*----------상세*/
			function detail(obj, type){
				$('#p_account').addClass('open')
				$('#resetPw').show();
				$('#deleteAccount').show();
				$('#accountDetailId').show();
				$('#accountNewId').hide();
				$('#saveAccount').prop('disabled', false);
				$('.popType').text('상세')
				$('#toggleAccount').show();

				if( type == 'default' ){
					$('#toggleAccount').show();
					$('#accountLockTxt').removeClass('open');
					console.log('aa')
				}else if( type == 'lock' ){
					$('#toggleAccount').hide();
					$('#accountLockTxt').addClass('open');
					console.log('bb')
				}
				
			}

			/*----------vaildation*/
			function accountVaild(obj, type){
				var ipt = $(obj).val();
				if( type == 'userId' ){
					vaildChk(obj, "Y24892","동일한 ID가 있습니다.", ipt.length < 4 );
				}else if( type == 'userPw' ){
					vaildChk(obj, "","", ipt.length < 4 );
				}else if( type == 'userName' ){
					vaildChk(obj, "","", ipt.length < 2 );
				}else if( type == 'userPhone' ){
					vaildChk(obj, "","", ipt.length < 4 );
				}
			}


			/*----------권한 question*/
			function quePermission(obj){
				var offset = $(obj).offset();
				var width = $(obj).width();
				var height = $(obj).height();
				console.log(offset)
				$('#p_quePermission').addClass('open').css({
					left:offset.left + width +  8 +'px',
					top:offset.top - height 
				})
			}

			/*----------비밀번호 초기화*/
			function resetPw(){
				$('#p_resetPw').addClass('open');
				$('#changePw1').focus();
			}

			//초기화하기 버튼 활성화, 비활성화
			function resetPwVaild(obj, type){

				var ipt = $(obj).val();
				
				if( type == 'pw1' ){
					vaildChk(obj, "","", ipt.length < 4 );
				}else if( type == 'pw2' ){
					vaildChk(obj, "","", ipt.length < 4 );
				}
			}

			function savResetPw(obj){
				popClose(obj);
				toast('비밀번호가 초기화되었습니다.')
			}
</script>