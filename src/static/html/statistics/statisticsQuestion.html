@@include('../../inc/top.html')
<body>
	<div class="wrap">
		@@include('../../inc/header.html')
		<div class="contents">
			@@include('../../inc/nav.html')
			<div class="pages">
				<div class="title-page">
					<h1>답변 통계</h1>
				</div>
				<ul class="tab">
					<li><a href="javascript:;" class="on" onclick="tab(this,'date');">날짜별</a></li>
					<li><a href="javascript:;" onclick="tab(this,'time')">시간별</a></li>
				</ul>
				<div class="search">
					<ul class="form">
						<li>
							<label>기간</label>
							<div class="ipt">
								<div class="chk txtOnly">
									<input type="radio" id="dateAll" name="dateType" checked="">
									<label for="dateAll">전체</label>
								</div>
								<div class="chk txtOnly">
									<input type="radio" id="dateToday" name="dateType">
									<label for="dateToday">오늘</label>
								</div>
								<div class="chk txtOnly">
									<input type="radio" id="dateWeek" name="dateType">
									<label for="dateWeek">7일전</label>
								</div>
								<div class="chk txtOnly">
									<input type="radio" id="dateMonth" name="dateType">
									<label for="dateMonth">1개월</label>
								</div>
							</div>
							<div class="ipt iptDate">
								<i class="ico-date"></i>
								<a href="javascript:;" class="dateN" onclick="date(this);">날짜 선택</a>
								<span class="tag ligthOrangeLine datepicker" style="display:none;">
									<!-- 디폴트 : 날짜 적용x -->
									<input type="text" class="">
									<a href="javascript:;" class="dateDelete" onclick="dateDelete(this);"><i class="ico-close orange500"></i></a>
								</span>
							</div>
						</li>
						<li>
							<label>언어</label>
							<div class="ipt">
								<div class="chk txtOnly">
									<input type="radio" id="langAll" name="langType" checked="">
									<label for="langAll">전체 163</label>
								</div>
								<div class="chk txtOnly">
									<input type="radio" id="langKo" name="langType">
									<label for="langKo">한국어 153</label>
								</div>
								<div class="chk txtOnly">
									<input type="radio" id="langJp" name="langType">
									<label for="langJp">일본어 153</label>
								</div>
								<div class="chk txtOnly">
									<input type="radio" id="langEn" name="langType">
									<label for="langEn">영어 153</label>
								</div>
							</div>
						</li>
					</ul>
					<div class="flexC gap16">
						<div class="chkArea">
							<span class="chk">
								<input type="radio" id="showTableDay" name="showTable" checked="">
								<label for="showTableDay">
									<span class="chkShape"></span>
									<span class="chkTxt">일별</span>
								</label>
							</span>
							<span class="chk">
								<input type="radio" id="showTableMonth" name="showTable">
								<label for="showTableMonth">
									<span class="chkShape"></span>
									<span class="chkTxt">월별</span>
								</label>
							</span>
						</div>
						<button type="button" class="btn-l" onclick="download();"><i class="ico-download"></i>다운로드</button>
					</div>
				</div>
				<!--//search-->
				<div class="tbl" id="tblDate">
					<div class="tblHd">
						<table>
							<colgroup>
								<col width="120"> <!--날짜-->
								<col width="140"> <!--답변 수-->
								<col width="*"> <!--세션 당 평균 답변 수-->
								<col width="130"> <!--GPT 답변-->
								<col width="100"> <!--GPT 답변-->
								<col width="100"> <!--GPT 답변-->
								<col width="130"> <!--자동완성 답변-->
								<col width="100"> <!--자동완성 답변-->
								<col width="100"> <!--자동완성 답변-->
								<col width="130"> <!--미학습 질문-->
								<col width="100"> <!--미학습 질문-->
								<col width="100"> <!--미학습 질문-->
								<col width="100"> <!--오답변-->
								<col width="100"> <!--상담원 연결-->
							</colgroup>
							<tr>
								<th rowspan="2"><button type="button" class="sort"><span>날짜</span><i class="ico-sort"></i></button></th>
								<th rowspan="2"><button type="button" class="sort"><span>답변 수</span><i class="ico-sort"></i></button></th>
								<th rowspan="2"><button type="button" class="sort"><span>세션 당 평균 답변 수</span><i class="ico-sort"></i></button></th>
								<th colspan="3" class="tbl_l_b">GPT 답변</th>
								<th colspan="3" class="tbl_l_b">자동완성 답변</th>
								<th colspan="3" class="tbl_l_b">미학습 질문</th>
								<th rowspan="2">오답변</th>
								<th rowspan="2">상담원 연결</th>
							</tr>
							<tr>
								<th>합계</th>
								<th>사용자</th>
								<th>관리자</th>
								<th>합계</th>
								<th>사용자</th>
								<th>관리자</th>
								<th>합계</th>
								<th>사용자</th>
								<th class="tbl_l_r">관리자</th>
							</tr>
						</table>
					</div>
					<!--//tblHd-->
					<div class="tblBody noCursor">
						<!-- empty addClass('open')-->
						<div class="empty center ">
							<i></i>
							<dl>
								<dt>검색 결과가 없습니다.</dt>
								<dd>다른 키워드로 다시 시도해 주세요.</dd>
							</dl>
						</div>
						<!--//empty-->
						<table>
							<colgroup>
								<col width="120"> <!--날짜-->
								<col width="140"> <!--답변 수-->
								<col width="*"> <!--세션 당 평균 답변 수-->
								<col width="130"> <!--GPT 답변-->
								<col width="100"> <!--GPT 답변-->
								<col width="100"> <!--GPT 답변-->
								<col width="130"> <!--자동완성 답변-->
								<col width="100"> <!--자동완성 답변-->
								<col width="100"> <!--자동완성 답변-->
								<col width="130"> <!--미학습 질문-->
								<col width="100"> <!--미학습 질문-->
								<col width="100"> <!--미학습 질문-->
								<col width="100"> <!--오답변-->
								<col width="100"> <!--상담원 연결-->
							</colgroup>
							<tr>
								<td>2024.01.17</td>
								<td><strong>256</strong></td>
								<td><strong>256</strong></td>
								<td>
									<div class="statisticsDl">
										<dl><dt class="crOrange500">1,545</dt><dd>67%</dd></dl>
									</div>
								</td>
								<td>25</td>
								<td>25</td>
								<td>
									<div class="statisticsDl">
										<dl><dt class="crOrange500">1,545</dt><dd>67%</dd></dl>
									</div>
								</td>
								<td>25</td>
								<td>25</td>
								<td>
									<div class="statisticsDl">
										<dl><dt class="crOrange500">1,545</dt><dd>67%</dd></dl>
									</div>
								</td>
								<td>25</td>
								<td>25</td>
								<td>25</td>
								<td>25</td>
							</tr>
						</table>
					</div>
					<!--//tblBody-->
					<div class="tblFooter">
						<div class="paging">
							<div class="prev">
								<button type="button" class="max" disabled></button>
								<button type="button" disabled></button>
							</div>
							<ul>
								<!-- 페이징 활성화 : a addClass('on') -->
								<li><a href="javascript:;" class="on">1</a></li>
								<li><a href="javascript:;">2</a></li>
								<li><a href="javascript:;">3</a></li>
								<li><a href="javascript:;">4</a></li>
							</ul>
							<div>
								<button type="button"></button>
								<button type="button" class="max"></button>
							</div>
						</div>
					</div>
					<!--//tblFooter-->
				</div>
				<!--//tbl, 날짜별-->
				<div class="tbl" id="tblTime" style="display:none;">
					<div class="dashBox flexInit p-20 m-b16" style="height:160px;">
						<div class="dashChart"><canvas id="chartTime"></canvas></div>
					</div>
					<div class="tblHd">
						<table>
							<colgroup>
								<col width="120"> <!--날짜-->
								<col width="*"> <!--답변 수-->
								<col width="54">
								<col width="54"> 
								<col width="54"> 
								<col width="54"> 
								<col width="54"> 
								<col width="54"> 
								<col width="54"> 
								<col width="54"> 
								<col width="54"> 
								<col width="54"> 
								<col width="54"> 
								<col width="54"> 
								<col width="54"> 
								<col width="54"> 
								<col width="54"> 
								<col width="54"> 
								<col width="54"> 
								<col width="54"> 
								<col width="54"> 
								<col width="54"> 
								<col width="54"> 
								<col width="54"> 
								<col width="54"> 
								<col width="54"> 
							</colgroup>
							<tr>
								<th><button type="button" class="sort"><span>날짜</span><i class="ico-sort"></i></button></th>
								<th><button type="button" class="sort"><span>답변 수</span><i class="ico-sort"></i></button></th>
								<th>00</th>
								<th>01</th>
								<th>02</th>
								<th>03</th>
								<th>04</th>
								<th>05</th>
								<th>06</th>
								<th>07</th>
								<th>08</th>
								<th>09</th>
								<th>10</th>
								<th>11</th>
								<th>12</th>
								<th>13</th>
								<th>14</th>
								<th>15</th>
								<th>16</th>
								<th>17</th>
								<th>18</th>
								<th>19</th>
								<th>20</th>
								<th>21</th>
								<th>22</th>
								<th>23</th>
							</tr>
						</table>
					</div>
					<!--//tblHd-->
					<div class="tblBody noCursor">
						<!-- empty addClass('open')-->
						<div class="empty center ">
							<i></i>
							<dl>
								<dt>검색 결과가 없습니다.</dt>
								<dd>다른 키워드로 다시 시도해 주세요.</dd>
							</dl>
						</div>
						<!--//empty-->
						<table>
							<colgroup>
								<col width="120"> <!--날짜-->
								<col width="*"> <!--답변 수-->
								<col width="54">
								<col width="54"> 
								<col width="54"> 
								<col width="54"> 
								<col width="54"> 
								<col width="54"> 
								<col width="54"> 
								<col width="54"> 
								<col width="54"> 
								<col width="54"> 
								<col width="54"> 
								<col width="54"> 
								<col width="54"> 
								<col width="54"> 
								<col width="54"> 
								<col width="54"> 
								<col width="54"> 
								<col width="54"> 
								<col width="54"> 
								<col width="54"> 
								<col width="54"> 
								<col width="54"> 
								<col width="54"> 
								<col width="54"> 
							</colgroup>
							<tr>
								<td>2024.01.17</td>
								<td><strong>256</strong></td>
								<td>256</td>
								<td>256</td>
								<td>256</td>
								<td>256</td>
								<td>256</td>
								<td>256</td>
								<td>256</td>
								<td>256</td>
								<td>256</td>
								<td>256</td>
								<td>256</td>
								<td>256</td>
								<td>256</td>
								<td>256</td>
								<td>256</td>
								<td>256</td>
								<td>256</td>
								<td>256</td>
								<td>256</td>
								<td>256</td>
								<td>256</td>
								<td>256</td>
								<td>256</td>
								<td>256</td>
							</tr>
						</table>
					</div>
					<!--//tblBody-->
					<div class="tblFooter">
						<div class="paging">
							<div class="prev">
								<button type="button" class="max" disabled></button>
								<button type="button" disabled></button>
							</div>
							<ul>
								<!-- 페이징 활성화 : a addClass('on') -->
								<li><a href="javascript:;" class="on">1</a></li>
								<li><a href="javascript:;">2</a></li>
								<li><a href="javascript:;">3</a></li>
								<li><a href="javascript:;">4</a></li>
							</ul>
							<div>
								<button type="button"></button>
								<button type="button" class="max"></button>
							</div>
						</div>
					</div>
					<!--//tblFooter-->
				</div>
				<!--//tbl, 시간별-->
			</div>
			<!--//pages-->
		</div>
		<!--//contents-->
	</div>
	<!--//wrap-->



    <!-------------------------------- popup incloude -->




    <!-------------------------------- script -->
    @@include('../../inc/script.html')

	<script type="text/javascript">

		//날짜별,시간별 탭
		function tab(obj, type){

			$('.tbl').hide();

			if( type == 'date'){ //날짜별

				$('#tblDate').show();

			}else if( type == 'time' ){ //시간별

				$('#tblTime').show();
			}
		}


		//시간대별 누적 세션
		var ctx = document.getElementById('chartTime');
		var chartTime = new Chart(ctx, {
			type: 'bar',
			data: {
				labels: ['00','01','02','03','04','05','06','07','08','09','10','11','12','13','14','15','16','17','18','19','20','21','22','23'],
				datasets: [{
					label: '일별 세션',
					data: [120, 162, 185, 123, 200, 201, 201, 201, 201, 201, 201, 201, 201, 201,120, 162, 185, 123, 200, 201, 201, 201, 201, 201],
					backgroundColor: '#343B42',
				}]
			},
			options: {
				maintainAspectRatio : false,
				legend: {
					display: false
				},
				responsive: true,
				tooltips: {
					enabled: true
				},
				hover: {
					animationDuration: 0
				},
				animation: {
					duration: 1,
					onComplete: function () {
						var chartInstance = this.chart,
						ctx = chartInstance.ctx;
						
						ctx.fillStyle = '#343B42';
						ctx.textAlign = 'center';
						ctx.textBaseline = 'bottom';

						this.data.datasets.forEach(function (dataset, i) {
							var meta = chartInstance.controller.getDatasetMeta(i);
							meta.data.forEach(function (bar, index) {
								var data = dataset.data[index];							
								ctx.fillText(data, bar._model.x, bar._model.y - 5);
							});
						});

						//최대값이 안보이는 현상이 있음. 임의로 차트에 최대값을 +1해서 넣어줄수있는지?
						//그래프 중 최고치 background,font color #FF5000
					}
				},
				scales: {
					yAxes: [{
						ticks: {
							beginAtZero: true,
							fontColor : '#8598AA',
							fontSize : 11,
						},
						gridLines:{
							display: false,
							drawBorder: false
						}
					}],
					xAxes: [{
						autoSkip: true,
						maxRotation: 0,
						minRotation: 0,
						barThickness: 20,
						ticks: {
							beginAtZero: true,
							fontColor : '#8598AA',
							fontSize : 11,

						},
						gridLines:{
							display: false,
							drawBorder: false
						}
					}]
				}
			}
		});

	</script>
</body>
</html>